const firebaseConfig={apiKey:"AIzaSyBfDaWdN16xnSvh945d7alHWc_d1dW7lMU",authDomain:"task-panel-723b2.firebaseapp.com",databaseURL:"https://task-panel-723b2.firebaseio.com",projectId:"task-panel-723b2",storageBucket:"task-panel-723b2.appspot.com",messagingSenderId:"70176189679",appId:"1:70176189679:web:31307d78853bad54",measurementId:"G-J6FSYY1PMT"},myUserId="wX4nfMMn6VhPjfzMYWoXPwssvDY2";firebase.initializeApp(firebaseConfig);const db=firebase.firestore(),quoteText=document.getElementById("quote-text"),quoteAuthor=document.getElementById("quote-author"),langRuButton=document.getElementById("langRu"),langEnButton=document.getElementById("langEn"),StoicQuoteButton=document.getElementById("StoicQuote"),regularContainer=document.getElementById("regular"),notFoundContainer=document.getElementById("notFound"),loaderContainer=document.getElementById("loader"),PREFIX="wirtaw.githab.io",quoteKey=e=>`${PREFIX}-clientQuote-${e}`,languageKey=`${PREFIX}-clientQuote-language`,StoicQuotes=[],quotes=[];if(db){db.collection("users").doc(myUserId).collection("quotes").get().then((e=>{e.forEach((e=>{const t=e.data();"stoic"===t.type?StoicQuotes.push(t):quotes.push(t)})),displayQuote(null)}))}const randomInt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function manageLanguageButtons(e){langRuButton.disabled="ru"===e,langEnButton.disabled="en"===e,StoicQuoteButton.disabled=!1}function saveQuote(e,t){const n={data:e,expires:Date.now()+864e5};localStorage.setItem(quoteKey(t),JSON.stringify(n))}function getRandomQuote(e){const t=quotes.filter((({language:t})=>t===e));return t.length?t[randomInt(0,t.length-1)]:null}function displayQuote(e=null){if(!localStorage.getItem("cookieConsent")){const e=document.createElement("div");e.innerHTML='\n      <p class="cookie-consent">We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.</p>\n      <button class="button" id="acceptCookies">Accept</button>\n      ',e.style.position="fixed",e.style.bottom="0",e.style.left="0",e.style.right="0",e.style.padding="20px",e.style.backgroundColor="#fff",e.style.border="solid 1px #485fc7",e.style.color="#000",e.style.textAlign="center",e.style.zIndex="1000",document.body.appendChild(e),document.getElementById("acceptCookies").addEventListener("click",(function(){localStorage.setItem("cookieConsent","true"),document.body.removeChild(e)}))}const t=[...new Set([...new Set(quotes.map((({language:e})=>e))),...new Set(StoicQuotes.map((({language:e})=>e)))])],n=navigator.languages[0].split("-")[0];let o=e||localStorage.getItem(languageKey);!o&&n?(o=t.includes(n)?n:"en",localStorage.setItem(languageKey,o)):e&&localStorage.setItem(languageKey,o);let a,l=null,u=null;if(localStorage.getItem(quoteKey(o))){u=localStorage.getItem(quoteKey(o));const{expires:e,...t}=JSON.parse(u);l=e,a={...t}}(!a||Date.now()>l)&&(a=getRandomQuote(o),a&&saveQuote(a,o)),a?(manageLanguageButtons(o),quoteText.textContent=a.quote||a.data.quote,quoteAuthor.textContent=a?.author?`- ${a.author}`:`- ${a.data.author}`,loaderContainer.style.display="none",regularContainer.style.display="block",notFoundContainer.style.display="none"):(quoteText.textContent="",quoteAuthor.textContent="",loaderContainer.style.display="none",regularContainer.style.display="none",notFoundContainer.style.display="block")}function displayStoicQuote(){let e=navigator.languages[0].split("-")[0]||"en";const t=new Date;let n=StoicQuotes.filter((({language:t})=>t===e)).find((({date:e})=>{const n=e.split("-").map((e=>Number.parseInt(e)));return n[1]===t.getMonth()+1&&n[2]===t.getDate()}));n?(regularContainer.style.display="block",notFoundContainer.style.display="none",loaderContainer.style.display="none",quoteText.textContent=n.quote,quoteAuthor.textContent=`- ${n.author}`):(localStorage.setItem(languageKey,"en"),n=StoicQuotes.find((({date:e})=>{const n=e.split("-").map((e=>Number.parseInt(e)));return n[1]===t.getMonth()+1&&n[2]===t.getDate()})),n?(regularContainer.style.display="block",notFoundContainer.style.display="none",loaderContainer.style.display="none",quoteText.textContent=n.quote,quoteAuthor.textContent=`- ${n.author}`):(quoteText.textContent="",quoteAuthor.textContent="",regularContainer.style.display="none",notFoundContainer.style.display="block",loaderContainer.style.display="none"))}function displayLoader(){loaderContainer.style.display="block",regularContainer.style.display="none",notFoundContainer.style.display="none"}document.addEventListener("DOMContentLoaded",displayLoader()),langEnButton.addEventListener("click",(()=>displayQuote("en"))),langRuButton.addEventListener("click",(()=>displayQuote("ru"))),StoicQuoteButton.addEventListener("click",(()=>displayStoicQuote()));